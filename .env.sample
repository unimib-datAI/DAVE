# ============================================================================
# DAVE Environment Configuration
# ============================================================================
# Copy this file to .env and configure the values for your environment
# REQUIRED variables are marked with [REQUIRED]
# ============================================================================

# ----------------------------------------------------------------------------
# DOCKER CONFIGURATION
# ----------------------------------------------------------------------------
# Restart policy for Docker containers
# Options: no, always, on-failure, unless-stopped
RESTART_POLICY=unless-stopped

# ----------------------------------------------------------------------------
# KEYCLOAK AUTHENTICATION (Optional - for SSO/OAuth)
# ----------------------------------------------------------------------------
# Keycloak database password
KEYCLOAK_DB_PASSWORD=keycloak

# Keycloak admin credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak hostname (adjust for your domain)
KEYCLOAK_HOSTNAME=vm.chronos.disco.unimib.it

# Keycloak configuration for services
USE_KEYCLOAK=true
KEYCLOAK_ISSUER=http://keycloak:8080/realms/DAVE
KEYCLOAK_ID=dave_client
KEYCLOAK_SECRET=your-keycloak-secret-change-me

# ----------------------------------------------------------------------------
# MONGODB CONFIGURATION
# ----------------------------------------------------------------------------
# IMPORTANT: Change these passwords in production!
# Defaults below work for local development
MONGO_ROOT_PASSWORD=dev_root_password_123
MONGO_PASSWORD=dev_app_password_456

# MongoDB connection string (uses the passwords above)
# Format: mongodb://username:password@host:port/database?authSource=admin
MONGO=mongodb://usr:dev_app_password_456@mongo:27017/dave?authSource=admin

# ----------------------------------------------------------------------------
# ELASTICSEARCH CONFIGURATION
# ----------------------------------------------------------------------------
# Name of the Elasticsearch index
ELASTIC_INDEX=dave
ELASTIC_PORT=9200

# ----------------------------------------------------------------------------
# NEXTAUTH CONFIGURATION (Authentication for UI)
# ----------------------------------------------------------------------------
# REQUIRED: Generate a random secret with: openssl rand -base64 32
# Default below works for development - CHANGE IN PRODUCTION!
NEXTAUTH_SECRET=dev-secret-key-change-in-production-use-openssl-rand-base64-32

# REQUIRED: Set to your domain or use http://127.0.0.1:3000/dave/api/auth for local
NEXTAUTH_URL=http://127.0.0.1:3000/dave/api/auth

# Internal NextAuth URL (usually same as NEXTAUTH_URL for local, different in production)
NEXTAUTH_URL_INTERNAL=http://localhost:3000

# ----------------------------------------------------------------------------
# UI CONFIGURATION (Frontend)
# ----------------------------------------------------------------------------
# Port for UI service to listen on
LISTEN_UI=3000

# Basic auth credentials for UI (if not using Keycloak)
ACCESS_USERNAME=admin
ACCESS_PASSWORD=password

# Base path for the application (e.g., /dave)
NEXT_PUBLIC_BASE_PATH=/dave

# Full path URL for the application
NEXT_PUBLIC_FULL_PATH=http://127.0.0.1:3000/dave

# UI variant configuration
VARIANT=default

# Host configuration
HOST=0.0.0.0

# Optional: Disable login (for development/testing only)
# NO_LOGIN=false

# Optional: Special mode flags
# STATALE_MODE=false

# Optional: Locale setting (default: ita)
# LOCALE=ita

# Optional: Predefined questions for chat (separated by -|)
# NEXT_PUBLIC_QUESTIONS=What is this document about?-|Summarize the main points-|Who are the key entities?

# Optional: Custom system prompt for AI chat
# NEXT_PUBLIC_SYSTEM_PROMPT=You are an expert assistant...

# Elasticsearch index name (public - exposed to frontend)
NEXT_PUBLIC_ELASTIC_INDEX=dave

# ----------------------------------------------------------------------------
# DOCUMENT SERVICE CONFIGURATION
# ----------------------------------------------------------------------------
# Document service port
DOCS_PORT=3001

# Internal API base URI for document service
API_BASE_URI=http://documents:3001

# API credentials for internal service communication
API_USERNAME=api_user
API_PASSWORD=dev_api_password_789

# JWT secret for document service
DOCUMENTS_JWT_SECRET=dev-jwt-secret-key-change-in-production-abc123

# ----------------------------------------------------------------------------
# TEXT GENERATION SERVICE CONFIGURATION
# ----------------------------------------------------------------------------
# Text generation service address (internal)
TEXT_GENERATION_ADDR=http://text-generation:8000

# Text generation API key
TEXT_GENERATION_KEY=dev-text-gen-key

# Model name for text generation
MODEL_NAME=default-model

# API endpoint for LLM (exposed to frontend)
API_LLM=http://text-generation:8000/v1

# GPU layers for text generation (adjust based on your GPU)
TEXT_GENERATION_GPU_LAYERS=35

# Alternative text generation flag
TEXT_GENERATION=true

# ----------------------------------------------------------------------------
# QA VECTORIZER SERVICE CONFIGURATION
# ----------------------------------------------------------------------------
# Base URL for the host
HOST_BASE_URL=http://0.0.0.0

# QA Vectorizer service port
QAVECTORIZER_ADDR=7863

# Chroma database port (if used)
CHROMA_PORT=8000

# Sentence transformer model for embeddings
# Options: Alibaba-NLP/gte-multilingual-base, sentence-transformers/all-MiniLM-L6-v2, etc.
SENTENCE_TRANSFORMER_EMBEDDING_MODEL=Alibaba-NLP/gte-multilingual-base

# Device for sentence transformer inference
# Options: cuda (for GPU), cpu (for CPU)
SENTENCE_TRANSFORMER_DEVICE=cuda

# Index name for object-to-name mapping
OGG2NAME_INDEX=dave_ogg2name

# API endpoint for indexer (exposed to frontend)
API_INDEXER=http://qavectorizer:7863

# ----------------------------------------------------------------------------
# ANNOTATION PIPELINE SERVICES (Optional - for NER and Entity Linking)
# ----------------------------------------------------------------------------
# These services are optional and used for advanced annotation features
# Leave empty if not using these services

# Anonymization endpoint
ANONYMIZATION_ENDPOINT=

# SpaCy NER annotation service
ANNOTATION_SPACYNER_URL=

# BLINK entity linking service
ANNOTATION_BLINK_URL=

# Indexer annotation service
ANNOTATION_INDEXER_URL=

# NIL prediction service (for entities not in knowledge base)
ANNOTATION_NILPREDICTION_URL=

# NIL clustering service
ANNOTATION_NILCLUSTER_URL=

# Annotation consolidation service
ANNOTATION_CONSOLIDATION_URL=

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# 1. Always use 127.0.0.1 instead of localhost to avoid DNS resolution issues
# 2. In production, change all default passwords and secrets
# 3. Generate NEXTAUTH_SECRET with: openssl rand -base64 32
# 4. Adjust GPU-related settings based on your hardware availability
# 5. MongoDB and Elasticsearch data will persist in ./mongo/data and ./elasticsearch/data
# 6. Models should be placed in ./models/ directory
# ============================================================================
